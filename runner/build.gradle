apply plugin: 'java'

task run(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    main = 'org.reluxa.Runner'
    workingDir = project.rootProject.projectDir
}

project.gradle.projectsEvaluated {
    project(":services").getSubprojects().each { p ->
            println "Adding dependency to " + p.name;
            run.dependsOn p.tasks.distZip
    }
}

configure(run) {
    group = 'application'
    description = 'Running the Runner'
}

dependencies {
    //compile ('org.springframework.boot:spring-boot')
    compile 'net.lingala.zip4j:zip4j'
    compile 'commons-io:commons-io'
}